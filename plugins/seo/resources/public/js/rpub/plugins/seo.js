import*as r from"cherry-cljs/cljs.core.js";import{useCallback as M,useState as N}from"react";import*as p from"rpub.admin.impl";import*as c from"rpub.lib.html";import*as v from"rpub.lib.http";import*as b from"rpub.lib.reagent";var O=function(u,s){return r.into.call(null,r.array_map(),r.map.call(null,function(o){return r.vector(u.call(null,o),o)},s))},Q=function(u){let s=u,o=r.__destructure_map.call(null,s),x=r.get.call(null,o,r.keyword("meta-tags")),q=r.get.call(null,o,r.keyword("anti-forgery-token")),S=r.array_map(r.keyword("anti-forgery-token"),q),w=N.call(null,r.array_map(r.keyword("meta-tag-index"),O.call(null,r.keyword("id"),x))),E=r.nth.call(null,w,0,null),G=r.nth.call(null,w,1,null),z=E,L=r.__destructure_map.call(null,z),d=r.get.call(null,L,r.keyword("meta-tag-index")),f=M.call(null,function(m){return c.debounce.call(null,function(a){let y=a.target.value,k=r.get.call(null,d,m),n=r.assoc.call(null,k,r.keyword("content"),y),l=r.assoc.call(null,S,r.keyword("body"),n);return v.post.call(null,"/api/seo/update-meta-tag",l),G.call(null,function(e){return r.assoc_in.call(null,e,r.vector(r.keyword("meta-tag-index"),m,r.keyword("content")),y)})},c.default_debounce_timeout_ms)});return r.vector(r.keyword("div"),r.vector(r.keyword("div"),r.array_map(r.keyword("class"),"p-4"),r.vector(p.box,r.array_map(r.keyword("title"),"SEO"))),r.vector(r.keyword("div"),r.array_map(r.keyword("class"),"p-4 pt-0"),r.vector(p.box,r.array_map(r.keyword("title"),r.vector(r.keyword("span"),r.array_map(r.keyword("class"),"text-2xl"),"Meta Tags"),r.keyword("content"),r.truth_.call(null,r.not.call(null,r.seq.call(null,d)))?r.vector(r.keyword("div"),"No meta tags."):r.vector(r.keyword("div"),r.array_map(r.keyword("class"),"grid gap-4 sm:grid-cols-2 sm:gap-6 max-w-2xl"),function a(y){return new r.LazySeq(null,function(){let k=y;for(;;){let n=r.seq.call(null,k);if(r.truth_.call(null,n)){let l=n;if(r.truth_.call(null,r.chunked_seq_QMARK_.call(null,l))){let e=r.chunk_first.call(null,l),_=r.count.call(null,e),i=r.chunk_buffer.call(null,_);return(()=>{let h=0;for(;;){if(h<_){let t=r._nth.call(null,e,h);r.chunk_append.call(null,i,r.vector(r.keyword("div"),r.array_map(r.keyword("class"),"sm:col-span-2",r.keyword("key"),r.keyword("id").call(null,t)),r.vector(r.keyword("label"),r.array_map(r.keyword("class"),"block mb-2 text-sm font-semibold text-gray-900 dark:text-white",r.keyword("for"),"name"),r.keyword("name").call(null,t)),r.vector(c.input,r.array_map(r.keyword("name"),r.keyword("meta-tag-value"),r.keyword("type"),r.keyword("text"),r.keyword("default-value"),(()=>{let g=r.keyword("content").call(null,t);return r.truth_.call(null,g)?g:r.keyword("property").call(null,t)})(),r.keyword("on-change"),f.call(null,r.keyword("id").call(null,t)))))),h=r.unchecked_inc.call(null,h);continue}else return!0;break}})()?r.chunk_cons.call(null,r.chunk.call(null,i),a.call(null,r.chunk_rest.call(null,l))):r.chunk_cons.call(null,r.chunk.call(null,i),null)}else{let e=r.first.call(null,l);return r.cons.call(null,r.vector(r.keyword("div"),r.array_map(r.keyword("class"),"sm:col-span-2",r.keyword("key"),r.keyword("id").call(null,e)),r.vector(r.keyword("label"),r.array_map(r.keyword("class"),"block mb-2 text-sm font-semibold text-gray-900 dark:text-white",r.keyword("for"),"name"),r.keyword("name").call(null,e)),r.vector(c.input,r.array_map(r.keyword("name"),r.keyword("meta-tag-value"),r.keyword("type"),r.keyword("text"),r.keyword("default-value"),(()=>{let _=r.keyword("content").call(null,e);return r.truth_.call(null,_)?_:r.keyword("property").call(null,e)})(),r.keyword("on-change"),f.call(null,r.keyword("id").call(null,e))))),a.call(null,r.rest.call(null,l)))}}break}},null,null)}.call(null,r.vals.call(null,d)))))))};c.add_element.call(null,r.keyword("seo-page"),b.reactify_component.call(null,Q));export{O as index_by,Q as seo_page};
